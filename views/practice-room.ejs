<html>
  <head>
    <!-- Stylesheets in here -->
    <link rel="stylesheet" href="/stylesheets/practice-room.css">
    <script src="/javascripts/aframe-master.js"></script>
    <script src="/javascripts/aframe-physics-system.min.js"></script>
    <script src="/javascripts/aframe-extras.min.js"></script>
    
    <script src="/javascripts/networked-aframe.min.js"></script>
    <script src="/javascripts/super-hands.min.js"></script>
    <script src="/javascripts/tt-ball.js"></script>
  </head>
  <body>
    <script src="/javascripts/socket.io.min.js"></script>
    <script src="/javascripts/easyrtc.js"></script>
    <a-scene id="game" networked-scene=<%- '"room:' + roomName + '; debug: true; adapter:easyrtc; audio:true;"'%>>
      <a-assets>
        <img id="sky" src="http://i.imgur.com/WqlqEkq.jpg" crossorigin="anonymous" />
        <!-- <a-asset-item id="tt-table-model" src="/models/tt-table.gltf"></a-asset-item>
        <a-asset-item id="tt-racket-model" src="/models/tt-racket.gltf"></a-asset-item> -->
        <template id="avatar-template">
          <a-sphere networked-audio-source="positional:false"></a-sphere>
       </template>
     </a-assets>
     <a-entity id="player" networked="template:#avatar-template;attachTemplateToLocal:false;" camera wasd-controls look-controls>
     </a-entity>

      <!-- <a-entity static-body gltf-model="#tt-table-model" position = "0 0 -2"></a-entity>

      <a-entity gltf-model="#tt-racket-model" grabbable dynamic-body="mass: 1" position="0 2 -2"></a-entity>
      <a-entity gltf-model="#tt-racket-model" grabbable dynamic-body="mass: 1" position="0 2 -2"></a-entity>
      <a-entity gltf-model="#tt-racket-model" grabbable dynamic-body="mass: 1" position="0 2 -2"></a-entity>
      <a-entity gltf-model="#tt-racket-model" grabbable dynamic-body="mass: 1" position="0 2 -2"></a-entity> -->

      <!-- <a-sphere dynamic-body="mass: 0.1" color="#ffffff" tt-ball scale="0.03 0.03 0.03"></a-sphere> -->

      <a-entity static-body 
        geometry="primitive: plane; width: 10000; height: 10000;" rotation="-90 0 0" material="color: #333333"></a-entity>

      <a-entity light="color: #ffffff; intensity: 0.01; type: ambient;" visible=""></a-entity>
      <a-entity id = "sceneLight" light="color: #ffffff; intensity: 0.02" position="5 5 5"></a-entity>

      <a-sky src="#sky" rotation="0 -90 0"></a-sky>

    </a-scene>

    <script>
      // Define custom schema for syncing avatar color, set by random-color
      NAF.schemas.add({
        template: '#avatar-template',
        components: [
          'position',
          'rotation',
          {
            selector: '.head',
            component: 'material',
            property: 'color'
          }
        ]
      });

      function onConnect () {
        console.log("onConnect", new Date());
      }
    </script>

    <footer>
      
    </footer>
  </body>
</html>
